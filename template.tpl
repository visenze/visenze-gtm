___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "ViSenze Smart Recommendations",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Deploy ViSenze solutions via GTM, enabling users in bypassing any development resources, launch and test ViSenze solutions as fast as possible.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "SELECT",
    "name": "integrationType",
    "displayName": "Tag Type",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "widget",
        "displayValue": "Add Widget(s) To Site"
      },
      {
        "value": "event.atc",
        "displayValue": "Enable Add To Cart Events Tracking"
      },
      {
        "value": "event.trans",
        "displayValue": "Enable Transaction Events Tracking"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "widget",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "appKey",
    "displayName": "App Key",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Copy from the integration page in Discovery Suite",
    "valueHint": "Copy from the integration page in Discovery Suite"
  },
  {
    "type": "GROUP",
    "name": "widgetSettings",
    "displayName": "Widget Settings",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "widgetPid",
        "displayName": "GTM Datalayer variable for ProductId",
        "simpleValueType": true,
        "help": "Select the Datalayer variable name that represents the hero product id that is used to load the recommendation widget",
        "valueHint": "e.g. ecommerce.items.0.item_id"
      },
      {
        "type": "TEXT",
        "name": "widgetPidValue",
        "displayName": "GTM-evaluated variable for ProductId",
        "simpleValueType": true,
        "help": "Select the GTM variable that represents the hero product id that is used to load the recommendation widget",
        "valueHint": "e.g. {{ ProductId }}"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "integrationType",
        "paramValue": "widget",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "atcSettings",
    "displayName": "Add To Cart Tracking Settings",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "atcPid",
        "displayName": "GTM variable for ProductId",
        "simpleValueType": true,
        "help": "Select the GTM variable that represents the product id that is added to cart",
        "valueHint": "e.g. ecommerce.items.0.item_id"
      },
      {
        "type": "TEXT",
        "name": "atcPidValue",
        "displayName": "GTM Datalayer variable for ProductId",
        "simpleValueType": true,
        "help": "Select the Datalayer variable name that represents the product id that is added to cart",
        "valueHint": "e.g. {{ ProductId }}"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "integrationType",
        "paramValue": "event.atc",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "transSettings",
    "displayName": "Transaction Event Tracking Settings",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "transProductArrFieldName",
        "displayName": "Field name of order product list in checkout event",
        "simpleValueType": true,
        "valueHint": "e.g products",
        "help": "Field name of transacted product list in checkout event"
      },
      {
        "type": "TEXT",
        "name": "transProductArrSkuField",
        "displayName": "Field name of product_id or sku in order product list",
        "simpleValueType": true,
        "valueHint": "e.g sku",
        "help": "Nested field name for ProductId in list of products in Checkout event pushed to GTM dataLayer"
      },
      {
        "type": "TEXT",
        "name": "transProductArrPriceField",
        "displayName": "Field name of sku item value in order product list",
        "simpleValueType": true,
        "help": "Field name for Price in list of products in Checkout event pushed to GTM dataLayer.",
        "valueHint": "e.g price"
      },
      {
        "type": "TEXT",
        "name": "transProductArrQtyField",
        "displayName": "Field name of sku item quantity in order product list",
        "simpleValueType": true,
        "help": "Field name for Quantity in list of products in Checkout event pushed to GTM dataLayer",
        "valueHint": "e.g quantity"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "integrationType",
        "paramValue": "event.trans",
        "type": "EQUALS"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

/**
 * This template injects appropriate ViSenze widget(s) on customers' PDP,
 * provided that:
 * 1. Customers provide identifier for PDP page for this script to load
 *    the widget at the correct location
 * 2. Template is injected to 'Page Load - DOM Ready' trigger
 */
const logToConsole = require('logToConsole');
const localStorage = require('localStorage');
const JSON = require('JSON');
const makeNumber = require('makeNumber');
const makeString = require('makeString');
const injectScript = require('injectScript');
const callInWindow = require('callInWindow');
const copyFromWindow = require('copyFromWindow');
const setInWindowFn = require('setInWindow');
const getContainerVersion = require('getContainerVersion');
const getQueryParameters = require('getQueryParameters');
const getUrl = require('getUrl');
const getType = require('getType');

const SCRIPT_VERSION = '0.1.11';
const CONTAINER_VERSION = getContainerVersion();
const setInWindow = (fnName, args) => {
  setInWindowFn(fnName, args, true);
};

// window layer variables
const VS_LAYER_REF = 'visenzeLayer';
const APP_DEPLOY_CONFIGS_REF = 'visenzeAppDeployConfigs';
const WIDGET_PID_REF = 'visenzeWidgetsPid';

// localstorage variables
const LAST_CLICK_REF = 'visenze_widget_last_click';
const VS_DEBUG_ID_REF = 'visenzeDebugId';

const env = CONTAINER_VERSION.environmentName === 'staging' || data.env === 'staging' ? 'staging' : 'production';
const appType = 'vsr';

const paramsMap = {
  staging: {
    sbi: {
      deployConfigUrl: 'https://search-dev.visenze.com',
    },
    vsr: {
      deployConfigUrl: 'https://search-dev.visenze.com',
    },
  },
  production: {
    sbi: {
      deployConfigUrl: 'https://search.visenze.com',
    },
    vsr: {
      deployConfigUrl: 'https://search.visenze.com',
    },
  },
};
const vsLayerPushMethod = VS_LAYER_REF + '.push';

const appKey = data.appKey;


const getAppDeployConfigsPlacement = (placementIdStr, useDefaultPlacement) => {
  const appDeployConfigs = copyFromWindow(APP_DEPLOY_CONFIGS_REF);
  const placements = appDeployConfigs && appDeployConfigs[appKey] && appDeployConfigs[appKey].placement_previews;

  if (placements) {
    // if placementIdStr is specified, try to find matching placement from array by placement_id
    if (placementIdStr) {
      const placementId = makeNumber(placementIdStr);
      for (const p of placements) {
        if (p.placement_id === placementId) {
          return p;
        }
      }
    }

    // fallback: return first placement if useDefaultPlacement is set to true
    if (useDefaultPlacement) {
      return placements[0] || null;
    }
  }

  return null;
};

const getPlacementObj = () => {
  const storedEvent = JSON.parse(localStorage.getItem(LAST_CLICK_REF));
  const placementIdStr = storedEvent && storedEvent.placement_id;
  if (!placementIdStr) {
    return null;
  }

  return getAppDeployConfigsPlacement(placementIdStr, false);
};


const log = (msg) => {
  const isVsDebugMode = !!getQueryParameters('visenzeDebugId');
  if (env === 'staging' || CONTAINER_VERSION.debugMode || CONTAINER_VERSION.previewMode || isVsDebugMode) {
    logToConsole(msg);
  }
};

const logWithError = (msgObj) => {
  logToConsole(msgObj);

  // send error to visenzeLayer
  const placementObj = getPlacementObj();
  if (placementObj) {
    const errObj = {
      error: JSON.stringify(msgObj),
      placementId: placementObj.placement_id,
      placementName: placementObj.name,
    };
    callInWindow(vsLayerPushMethod, errObj);
  }

  // send error to gtm dataLayer with custom event name, e.g. vsError
  callInWindow('dataLayer.push', { event: 'vsError', result: msgObj, data: data });
};


const getFromDataLayers = (dataLayerArr, eventName, fn, fnArgs) => {
  for (var i = dataLayerArr.length - 1; i >= 0; i--) {
    const dl = dataLayerArr[i];
    // if eventName is specified, find trigger event by comparing gtmEventId with dataLayer
    if (!dl || (eventName && dl['gtm.uniqueEventId'] !== data.gtmEventId)) {
      continue;
    }

    const val = fnArgs ? fn(dl, fnArgs) : fn(dl);
    if (val) {
      return val;
    }
  }

  return '';
};

const getFieldByNestedKey = (dl, keys) => {
  if (!dl) {
    return '';
  }

  if (keys.length < 1) {
    return dl;
  }

  let productId = '';
  const key = keys[0];

  const keyIntValue = makeNumber(key);
  if ((keyIntValue || keyIntValue === 0) && getType(dl) === 'array') {
    for (const el of dl) {
      const productIdToAdd = keys.length === 1 ? makeString(el) : getFieldByNestedKey(el, keys.slice(1));
      productId = productId + (productId ? ',' : '') + productIdToAdd;
    }

    return productId;
  }

  const nestedValue = dl[key];
  if (!nestedValue) {
    return '';
  }

  return keys.length > 1 ? getFieldByNestedKey(nestedValue, keys.slice(1)) : nestedValue;
};

const toValidStringValue = (fieldName) => {
  const val = data[fieldName];
  const valType = getType(val);
  if (valType === 'string') {
    return val;
  } else if (valType === 'number') {
    logWithError({ msg: 'field value is of type number, possible field input error', value: val, field_name: fieldName });
    return val;
  } else if (valType === 'undefined' || valType === 'null') {
    logWithError({ msg: 'unable to find field value', value: val, field_name: fieldName });
    return '';
  } else {
    logWithError({ msg: 'invalid field value type', value: val, field_name: fieldName });
    return '';
  }
};

const validatePidType = (pid) => {
  const pidType = getType(pid);
  if (pidType === 'object' || pidType === 'array' || pidType === 'function') {
    logWithError({ msg: 'invalid productId value', type: pidType, value: pid });
    return false;
  }

  return true;
};

const getProductId = (gtmVarValue, productIdField, eventName) => {
  if (gtmVarValue) {
    return validatePidType(gtmVarValue) ? makeString(gtmVarValue) : '';
  }

  if (!productIdField) {
    logWithError({ msg: 'Input field for retrieving productId is empty' });
    return '';
  } else if (getType(productIdField) !== 'string') {
    logWithError({ msg: 'Invalid input type for product_id field; string input expected', value: productIdField });
    return '';
  }
  const dataLayerArr = copyFromWindow('dataLayer');
  const objKeys = productIdField.split('.');

  const pid = getFromDataLayers(dataLayerArr, eventName, getFieldByNestedKey, objKeys);
  return validatePidType(pid) ? makeString(pid) : '';
};


log({
  version: SCRIPT_VERSION,
  container: CONTAINER_VERSION,
  url: getUrl('query'),
  dataLayer: copyFromWindow('dataLayer'),
  data: data,
});


const getDebugId = () => {
  const queryParam = getQueryParameters('visenzeDebugId');
  if (queryParam) {
    localStorage.setItem(VS_DEBUG_ID_REF, queryParam);
    return queryParam;
  }
  return localStorage.getItem(VS_DEBUG_ID_REF);
};


const initWidget = () => {
  // default to data.widgetPidValue if it exists
  const productId = getProductId(data.widgetPidValue, data.widgetPid, null);

  let deployScriptUrl = paramsMap[env][appType].deployConfigUrl + '/v1/deploy-configs?app_key=' + appKey + '&gtm_deploy=true&gtm_v=' + SCRIPT_VERSION;

  const debugId = getDebugId();
  if (debugId) {
    deployScriptUrl = deployScriptUrl + '&debug_id=' + debugId; 
  }

  const successFn = () => {
    log('successfully loaded widget');
    // Call data.gtmOnSuccess when the tag is done deploying script.
    data.gtmOnSuccess();
  };

  const failureFn = () => {
    logWithError({ msg: 'unable to load deploy script', url: deployScriptUrl, debugId: debugId });
    data.gtmOnFailure();
  };

  log({ url: deployScriptUrl, appKey: appKey, productId: productId });

  // before widget injection, check GTM layer to see if ProductId exists
  // and if so, inject to window ref
  if (productId) {
    setInWindow(WIDGET_PID_REF, productId);
  }

  // initialize visenzeLayer if it does not exist
  const vsLayer = copyFromWindow(VS_LAYER_REF);
  if (!vsLayer) {
    setInWindow(VS_LAYER_REF, []);
  }

  injectScript(deployScriptUrl, successFn, failureFn, deployScriptUrl);
};


const shouldDeployTypeSendEvent = () => {
  const appDeployConfigs = copyFromWindow(APP_DEPLOY_CONFIGS_REF);
  log({ appDeployConfigs: appDeployConfigs });

  const deployType = appDeployConfigs && appDeployConfigs[appKey] && appDeployConfigs[appKey].deploy_type_id;
  return deployType === 1 || deployType === '1';
};

const sendWidgetEvent = (eventName, eventsArr) => {
  const storedEvent = JSON.parse(localStorage.getItem(LAST_CLICK_REF)) || {};
  log({ storedEvent: storedEvent });

  const queryId = storedEvent.queryId;
  let placementId = storedEvent.placement_id;
  if (!(queryId && placementId)) {
    log('Unable to retrieve last clicked widget for event: ', eventName);
    const placement = getAppDeployConfigsPlacement('', true);

    if (!placement) {
      logWithError('Unable to retrieve default placement for event: ', eventName);
      placementId = '';
    } else {
      placementId = makeString(placement.placement_id);
    }
  }

  for (const ev of eventsArr) {
    if (queryId) {
      ev.query_id = queryId;
    }
    ev.gtm_v = SCRIPT_VERSION;
  }

  const debugId = getDebugId() || '';
  // initialize visenzeLayer if not available
  const vsLayerRef = copyFromWindow(VS_LAYER_REF);
  if (!vsLayerRef) {
    setInWindow(VS_LAYER_REF, []);
  }
  // call visenzeLayer.push method, with event
  const vsLayerBody = {
    action: 'sendEvents',
    placementId: placementId,
    params: [eventName, eventsArr],
    debugId: debugId,
  };
  const sendEventForDeployType = shouldDeployTypeSendEvent();
  if (!sendEventForDeployType) {
    vsLayerBody.deployTypeId = '1';
  }

  callInWindow(vsLayerPushMethod, vsLayerBody);

  log({ eventName: eventName, body: vsLayerBody, method: vsLayerPushMethod, visenzeLayer_original: vsLayerRef });
};

const sendAtcEvent = () => {
  const productId = getProductId(data.atcPidValue, data.atcPid, data.integrationType);
  if (!productId) {
    logWithError({ msg: 'event not triggered', integrationType: data.integrationType, productId: productId });
    data.gtmOnFailure();
    return;
  }

  const EVENT_NAME = 'add_to_cart';
  const successEv = sendWidgetEvent(EVENT_NAME, [{ pid: productId }]);
  data.gtmOnSuccess();
};

const sendTransactionEventForProductArr = (productArr) => {
  const EVENT_NAME = 'transaction';
  const eventsArr = [];

  const toValidNumber = (val, defaultVal, fieldName) => {
    const valType = getType(val);
    if (valType === 'number') {
      return val;
    } else if (valType === 'string') {
      logWithError({ msg: 'field value is of type string, possible conversion failure to number', value: val, field_name: fieldName });
      return makeNumber(val || defaultVal);
    } else if (valType === 'undefined' || valType === 'null') {
      logWithError({ msg: 'unable to find field value', value: val, field_name: fieldName });
      return defaultVal;
    } else {
      logWithError({ msg: 'invalid field value type', value: val, field_name: fieldName });
      return defaultVal;
    }
  };

  for (const productEl of productArr) {
    const pidField = toValidStringValue('transProductArrSkuField');
    const pid = productEl && productEl[pidField];
    if (!pid || !validatePidType(pid)) {
      logWithError({ msg: 'unable to find productId in product', field: pidField, product: productEl });
      continue;
    }

    const qtyField = toValidStringValue('transProductArrQtyField');
    const priceField = toValidStringValue('transProductArrPriceField');
    const qty = toValidNumber(productEl[qtyField], 1, 'quantity');
    const price = toValidNumber(productEl[priceField], 0, 'price');
    eventsArr.push({ pid: makeString(pid), value: qty * price });
  }

  sendWidgetEvent(EVENT_NAME, eventsArr);
  data.gtmOnSuccess();
};

const sendTransactionEvent = () => {
  const dataLayerArr = copyFromWindow('dataLayer');
  const productArrFieldKeys = (data.transProductArrFieldName || '').split('.');
  const productArr = getFromDataLayers(dataLayerArr, data.integrationType, getFieldByNestedKey, productArrFieldKeys);

  if (!productArr || !productArr.length) {
    logWithError({ msg: 'unable to get products for transaction event', field: data.transProductArrFieldName });
    data.gtmOnFailure();
    return;
  }
  if (getType(productArr) !== 'array') {
    logWithError({ msg: 'expected transaction object is not of type array', value: productArr });
    data.gtmOnFailure();
    return;
  }

  sendTransactionEventForProductArr(productArr);
  data.gtmOnSuccess();
};


switch (data.integrationType) {
  case 'widget': return initWidget();
  case 'event.atc': return sendAtcEvent();
  case 'event.trans': return sendTransactionEvent();
  default: data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ga"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ga.q"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ga.l"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "visenzeWidgets"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "visenzeAppDeployConfigs"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "visenzeLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "visenzeLayer.push"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "visenzeWidgetsPid"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer.push"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.visenze.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_local_storage",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "visenzeDebugId"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "visenze_widget_last_click"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: ATC_invalid_atcPidValue_successEvent
  code: |-
    // assert productId still sent to ATC with success, even with invalid product_id value
    const invalidPid = 'asdf';
    const mockData = {
      // Mocked field values
      integrationType: 'event.atc',
      atcPidValue: invalidPid,
      atcPid: ''
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
    const expectedBody = {
      action: 'sendEvents',
      placementId: 123,
      params: [
        'add_to_cart',
        [{pid: invalidPid, queryId: 'xxx', gtm_v: SCRIPT_VERSION}]
      ],
      debugId: '',
      deployTypeId: '1'
    };
- name: ATC_valid_atcPidValue_successEvent
  code: |-
    const mockData = {
      // Mocked field values
      integrationType: 'event.atc',
      atcPidValue: '1234',
      atcPid: ''
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
- name: ATC_invalidPath_atcPid_failureEvent
  code: |-
    const mockData = {
      // Mocked field values
      integrationType: 'event.atc',
      atcPidValue: '',
      atcPid: 'ecommerce.items[0].id'
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnFailure').wasCalled();
    assertApi('copyFromWindow').wasCalledWith('dataLayer');
    assertApi('logToConsole').wasCalledWith({"msg":"event not triggered","integrationType":"event.atc","productId":""});
- name: ATC_validPath_atcPid_successEvent
  code: |-
    const mockData = {
      // Mocked field values
      integrationType: 'event.atc',
      atcPidValue: '',
      atcPid: 'ecommerce.items.0.id'
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
    assertApi('copyFromWindow').wasCalledWith('dataLayer');
- name: ATC_atcPidValue_invalidType_failureEvent
  code: |-
    // assert ATC event not triggered successfully when evaluated GTM variable is of invalid type
    const invalidPid = {"product_id": "this is an object not a pid"};
    const mockData = {
      // Mocked field values
      integrationType: 'event.atc',
      atcPidValue: invalidPid,
      atcPid: ''
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertApi('gtmOnFailure').wasCalled();
    assertApi('copyFromWindow').wasCalledWith('dataLayer');
    assertApi('logToConsole').wasCalledWith({"msg":"invalid productId value","type":"object","value":{"product_id":"this is an object not a pid"}});
- name: initWidget_widgetPidValue_invalidType_successEvent_with_errorLog
  code: |-
    // assert initWidget event triggered successfully, but with empty pid, when evaluated GTM variable is of invalid type
    const invalidPid = {"product_id": "this is an object not a pid"};
    const mockData = {
      // Mocked field values
      integrationType: 'widget',
      widgetPidValue: invalidPid,
      widgetPid: ''
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertApi('copyFromWindow').wasCalledWith('dataLayer');
    assertApi('logToConsole').wasCalledWith({"msg":"invalid productId value","type":"object","value":{"product_id":"this is an object not a pid"}});
- name: transaction_arrFieldName_invalidType_failureEvent
  code: |
    // assert transaction event fails when field name of array is invalid
    const invalidArrFieldName = 'transactionId';
    const mockData = {
      // Mocked field values
      integrationType: 'event.trans',
      transProductArrFieldName: invalidArrFieldName,
      transProductArrSkuField: 'sku',
      transProductArrQtyField: 'price',
      transProductArrPriceField: 'quantity',
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished with failure.
    assertApi('gtmOnFailure').wasCalled();
    assertApi('logToConsole').wasCalledWith({"msg":"expected transaction object is not of type array","value":"1234"});
- name: transaction_arrSkuField_invalid_successEvent
  code: |
    // assert transaction event executes with success, with no products sent, when field name of sku field is invalid
    const invalidSkuFieldName = 'sku_invalid';
    const mockData = {
      // Mocked field values
      integrationType: 'event.trans',
      transProductArrFieldName: 'transactionProducts',
      transProductArrSkuField: invalidSkuFieldName,
      transProductArrQtyField: 'price',
      transProductArrPriceField: 'quantity',
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();

    // assert error logged to GTM for both products
    assertApi('logToConsole').wasCalledWith({"msg":"unable to find productId in product","field":"sku_invalid","product":{"sku":"DD44","name":"T-Shirt","category":"Apparel","price":11.99,"quantity":1,"invalidQtyValue":{"quantity":1},"invalidPriceValue":[11.99]}});

    assertApi('logToConsole').wasCalledWith({"msg":"unable to find productId in product","field":"sku_invalid","product":{"sku":"AA1243544","name":"Socks","category":"Apparel","price":9.99,"quantity":2,"invalidQtyValue":{"quantity":2},"invalidPriceValue":[9.99]}});
- name: transaction_arrQtyField_invalidValue_successEvent
  code: |-
    // assert transaction event executes with success, and products sent with value 0, when field value of quantity field is invalid
    const mockData = {
      // Mocked field values
      integrationType: 'event.trans',
      transProductArrFieldName: 'transactionProducts',
      transProductArrSkuField: 'sku',
      transProductArrQtyField: 'price',
      transProductArrPriceField: 'invalidQtyValue', // refer to mock data; field value here is of type object instead of number
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();

    // assert value pushed is zero
    assertApi('callInWindow').wasCalledWith(
      'visenzeLayer.push',
      {"action":"sendEvents","placementId":123,"params":["transaction",[{"pid":"DD44","value":0,"query_id":"xxx","gtm_v":SCRIPT_VERSION},{"pid":"AA1243544","value":0,"query_id":"xxx","gtm_v":SCRIPT_VERSION}]],"debugId":"","deployTypeId":"1"}
    );

    // assert error logged to GTM for both products
    assertApi('logToConsole').wasCalledWith({"msg":"invalid field value type","value":{"quantity":1},"field_name":"price"});

    assertApi('logToConsole').wasCalledWith({"msg":"invalid field value type","value":{"quantity":2},"field_name":"price"});
- name: transaction_arrPriceField_invalidValue_successEvent
  code: |-
    // assert transaction event executes with success, and products sent with value 0, when field value of price field is invalid
    const mockData = {
      // Mocked field values
      integrationType: 'event.trans',
      transProductArrFieldName: 'transactionProducts',
      transProductArrSkuField: 'sku',
      transProductArrQtyField: 'invalidPriceValue', // refer to mock data; field value here is of type array instead of number
      transProductArrPriceField: 'qty',
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();

    // assert value pushed is zero
    assertApi('callInWindow').wasCalledWith(
      'visenzeLayer.push',
      {"action":"sendEvents","placementId":123,"params":["transaction",[{"pid":"DD44","value":0,"query_id":"xxx","gtm_v":SCRIPT_VERSION},{"pid":"AA1243544","value":0,"query_id":"xxx","gtm_v":SCRIPT_VERSION}]],"debugId":"","deployTypeId":"1"}
    );

    // assert error logged to GTM for both products
    assertApi('logToConsole').wasCalledWith({"msg":"invalid field value type","value":[11.99],"field_name":"quantity"});

    assertApi('logToConsole').wasCalledWith({"msg":"invalid field value type","value":[9.99],"field_name":"quantity"});
setup: "const localStorage = require('localStorage');\nconst json = require('JSON');\n\
  \nconst DATA_LAYER_WINDOW_FIELD = 'dataLayer';\nconst LAST_CLICK_REF = 'visenze_widget_last_click';\n\
  // NOTE: TODO: update script_version for each new version\n// to ensure unit tests\
  \ which validate gtm_v pass\nconst SCRIPT_VERSION = '0.1.11';\n\nconst atcData =\
  \ {\n   \"event\": \"addToCart\",\n   \"ecommerce\": {\n      \"items\": [\n   \
  \      {\n            \"id\": 1234,\n            \"name\": \"PRODUCT_NAME\",\n \
  \           \"image\": \"https://www.example.com\",\n            \"price\": \"111.00\"\
  ,\n            \"brand\": \"X\",\n            \"category\": \"T-shirt\",\n     \
  \       \"hype\": \"No\",\n            \"variant_id\": \"37219\",\n            \"\
  size\": \"M\",\n            \"sku\": \"123412341234\"\n         }\n      ],\n  \
  \    \"currencyCode\": \"USD\"\n   },\n};\n\nconst productData = {\n   \"event\"\
  : \"productDetails\",\n   \"ecommerce\": {\n      \"product\": {\n        \"id\"\
  : 1234,\n        \"name\": \"PRODUCT_NAME\",\n        \"image\": \"https://www.example.com\"\
  ,\n        \"price\": \"111.00\",\n        \"brand\": \"X\",\n        \"category\"\
  : \"T-shirt\",\n        \"hype\": \"No\",\n        \"variant_id\": \"37219\",\n\
  \        \"size\": \"M\",\n        \"sku\": \"123412341234\",\n        \"language\"\
  : \"en\",\n      },\n      \"currencyCode\": \"USD\"\n   }\n};\n\nconst transactionData\
  \ = {\n  transactionId: '1234',\n  transactionAffiliation: 'Acme Clothing',\n  transactionTotal:\
  \ 38.26, \n  transactionTax: 1.29,\n  transactionShipping: 5,\n  transactionProducts:\
  \ [\n    {\n      sku: 'DD44',\n      name: 'T-Shirt',\n      category: 'Apparel',\n\
  \      price: 11.99,  \n      quantity: 1,\n      invalidQtyValue: {\"quantity\"\
  : 1},\n      invalidPriceValue: [11.99],\n    },\n    {\n      sku: 'AA1243544',\n\
  \      name: 'Socks',\n      category: 'Apparel',\n      price: 9.99,\n      quantity:\
  \ 2,\n      invalidQtyValue: {\"quantity\": 2},\n      invalidPriceValue: [9.99],\n\
  \    }\n  ]\n};\n\nconst productIdData = {\n  'Product_SKU': 'product_123',\n};\n\
  \nconst lastClickedEvent = {\n  queryId: 'xxx',\n  placement_id: 123,\n};\n\n//\
  \ set LocalStorage permission for LAST_CLICKED_REF to r/w before starting tests\n\
  localStorage.setItem(LAST_CLICK_REF, json.stringify(lastClickedEvent));\n\nmock('copyFromWindow',\
  \ function(windowVar) {\n  if (windowVar === 'dataLayer') {\n    return [transactionData,\
  \ atcData, productData];\n  }\n});\n"


___NOTES___

Created on 04/10/2022, 10:50:22


